@model List<SpadStore.Infratructure.Dtos.Product.ProductWithPriceDto>
<div class="product-section grid-view">
    @if (Model.Any())
    {
        <div class="row">
            @foreach (var item in Model)
            {
                var discountTypeStr = ((int)item.DiscountType) == 1 ? "درصد" : "تومان";
            <div class="col-lg-4 col-md-4 col-6">
            <div class="product-item">
                <a href="/Shop/Product/@item.Id">
                    <div class="product-image">
                        @if (item.Price > 200000)
                        {
                            <div class="new-label" title="ارسال رایگان"><span><i class="fas fa-shipping-fast"></i></span></div>
                        }
                        <img class="cart-item-image" src="~/Files/ProductImages/Thumb/@item.Image" alt="@item.ShortTitle">
                    </div>
                </a>
                    <div class="product-details-outer">
                        <div class="product-details">
                            <div class="product-title">
                                <a href="/Shop/Product/@item.Id">@item.ShortTitle </a>
                            </div>

                            <div class="price-section-wrapper">
                                @if (item.DiscountAmount > 0)
                                {
                                    <div class="sale-label-container">
                                        <div class="sale-label"><span>@item.DiscountAmount @discountTypeStr</span></div>
                                    </div>
                                }
                                <div class="price-wrapper">
                                    @if (item.Price == 0)
                                    {
                                        <a href="javascript:void(0)">-</a>
                                    }
                                    else if (item.PriceAfterDiscount < item.Price)
                                    {
                                        <del class="price old-price">@item.Price.ToString("##,###")</del>
                                        <span class="price">@item.PriceAfterDiscount.ToString("##,###") تومان</span>
                                    }
                                    else
                                    {
                                        <span class="price">@item.Price.ToString("##,###") تومان</span>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="product-details-btn">
                            <div class="hover-product-details">

                                <div class="product-title">
                                    <a href="/Shop/Product/@item.Id">@item.ShortTitle</a>
                                </div>


                                <div class="price-section-wrapper">
                                    @if (item.DiscountAmount > 0)
                                    {
                                        <div class="sale-label-container">
                                            <div class="sale-label"><span>@item.DiscountAmount @discountTypeStr</span></div>
                                        </div>
                                    }
                                    <div class="price-wrapper">
                                        @if (item.Price == 0)
                                        {
                                            <a href="javascript:void(0)">-</a>
                                        }
                                        else if (item.PriceAfterDiscount < item.Price)
                                        {
                                            <del class="price old-price">@item.Price.ToString("##,###")</del>
                                            <span class="price">@item.PriceAfterDiscount.ToString("##,###") تومان</span>
                                        }
                                        else
                                        {
                                            <span class="price">@item.Price.ToString("##,###") تومان</span>
                                        }
                                    </div>
                                </div>
                            </div>
                            @if (item.Price > 0 && item.PriceAfterDiscount > 0)
                            {
                                <a href="javascript:void(0)" onclick="AddToCart(@item.Id)" class="btn add-product-btn">اضافه کردن به سبد خرید</a>

                            }
                            else
                            {
                                <a href="tel:@ViewBag.CallForProductNumber.Title" class="btn add-product-btn" style="">تماس بگیرید</a>
                            }
                        </div>
                    </div>
                </div>
            </div>
            }
        </div>
    }
    else
    {
        <h4>محصولی یافت نشد</h4>
    }
</div>
<div class="shorting center-md">
    <div class="row">
        <div class="col-lg-6">
            <div class="pagination-bar">

                <ul>
                    @{
                        if (ViewBag.CurrentPage > 1)
                        {
                            <li><a href="#" onclick="GetGrid(@(ViewBag.CurrentPage-1))"><i class="fa fa-angle-right"></i></a></li>
                        }
                        for (int i = 1; i <= ViewBag.PageCount; i++)
                        {
                            <li class="@(i == ViewBag.CurrentPage? "active":null)"><a href="#" onclick="GetGrid(@i)">@i</a></li>

                        }
                        if (ViewBag.CurrentPage < ViewBag.PageCount)
                        {
                            <li><a href="#" onclick="GetGrid(@(ViewBag.CurrentPage+1))"><i class="fa fa-angle-left"></i></a></li>

                        }
                    }
                </ul>
            </div>
        </div>
        @*<div class="col-lg-6">
                <div class="show-item left-side float-none-md">
                    <span class="float-none-md d-block">نمایش 1 از 15 صفحه</span>
                </div>
            </div>*@
    </div>
</div>
